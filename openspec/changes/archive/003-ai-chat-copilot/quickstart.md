# AI å†³ç­–å¯¹è¯åŠŸèƒ½ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ 3åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### 1. ç¯å¢ƒéªŒè¯

åœ¨`003-ai-ai`åˆ†æ”¯ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# éªŒè¯æ‰€æœ‰å¿…è¦ç»„ä»¶å°±ç»ª
make chat-dev-setup
# é¢„æœŸè¾“å‡ºï¼šâœ… Database ready  âœ… AI models configured  âœ… Test data seeded
```

å¦‚æœå‘ç°ç¼ºå¤±ç»„ä»¶ï¼Œè¿è¡Œï¼š

```bash
npm run setup:chat-modules
```

### 2. ç¬¬ä¸€æ¬¡AIå¯¹è¯

é€šè¿‡ä¸‰ç§æ–¹å¼ä½“éªŒåŠŸèƒ½ï¼š

#### é€‰é¡¹A: ç½‘é¡µç«¯æµ‹è¯•

è®¿é—®: `http://localhost:3000/chat/test`

- è¾“å…¥ï¼š"æµ‹è¯•å¯¹è¯ï¼šAè‚¡ç°åœ¨è¡Œæƒ…æ€ä¹ˆæ ·ï¼Ÿ"
- é¢„æœŸè¿”å›ï¼šå®æ—¶çš„Aè‚¡ä¸»è¦æŒ‡æ•°æƒ…å†µ+ä¸ªæ€§åŒ–æç¤º

#### é€‰é¡¹B: APIç›´è¿æµ‹è¯•

```bash
curl -X POST http://localhost:3000/api/chat/conversation \
  -H "Content-Type: application/json" \
  -d '{
    "message": "æˆ‘æ˜¯æ–°æ‰‹æŠ•èµ„è€…ï¼Œæƒ³äº†è§£é“¶è¡Œè‚¡",
    "testMode": true
  }'
```

#### é€‰é¡¹C: VSCodeå¿«æ·æµ‹è¯•

å¿«æ·é”®ï¼š`Ctrl+Shift+P` â†’ è¾“å…¥ "Run AI Chat Test"

### 3. æ ¸å¿ƒåŠŸèƒ½éªŒè¯

æŒ‰éƒ¨å°±ç­éªŒè¯å››ä¸ªå…³é”®åœºæ™¯ï¼š

| æµ‹è¯•åœºæ™¯     | ç”¨æˆ·è¯æœ¯ç¤ºä¾‹                   | æœŸæœ›AIå›åº”                       |
| ------------ | ------------------------------ | -------------------------------- |
| **åŸºç¡€é—®ç­”** | "å¤§ç›˜ä»Šå¤©æ€ä¹ˆæ ·ï¼Ÿ"             | æä¾›ä¸»è¦æŒ‡æ•°å®æ—¶æ•°æ®ï¼ŒåŒ…å«æ—¶é—´æˆ³ |
| **ä¸ªæ€§åŒ–**   | "æˆ‘æŒä»“çš„ç§‘æŠ€è‚¡æœ€è¿‘é£é™©é«˜å—ï¼Ÿ" | ç»“åˆç”¨æˆ·æ¨¡æ‹ŸæŒä»“é£é™©è¯„ä¼°         |
| **æ•™è‚²å†…å®¹** | "è¯·è§£é‡Šä¸€ä¸‹è“ç­¹è‚¡å’Œæˆé•¿è‚¡ï¼Ÿ"   | é€šä¿—æ˜“æ‡‚çš„æ¦‚å¿µè§£é‡Š               |
| **åˆè§„æ€§**   | "ä¹°å“ªæ”¯è‚¡ç¥¨èƒ½ä¿è¯èµšé’±ï¼Ÿ"       | æ‹’ç»å›ç­”å¹¶è¯´æ˜æŠ•èµ„å»ºè®®éæ‰¿è¯ºæ€§è´¨ |

### 4. å¼€å‘è°ƒè¯•æŠ€å·§

#### å®æ—¶æŸ¥çœ‹å¯¹è¯æ—¥å¿—

```bash
npm run chat:monitor
# å®æ—¶ç›‘æ§ç”¨æˆ·å¯¹è¯å’ŒAIå“åº”
```

#### é‡ç½®æµ‹è¯•ç¯å¢ƒ

```bash
npm run chat:reset-test-data
# æ¸…ç†æµ‹è¯•å¯¹è¯ï¼Œé‡ç½®ç”¨æˆ·åå¥½è®¾ç½®
```

#### æ€§èƒ½è¯Šæ–­

```bash
npm run chat:benchmark
# æµ‹è¯•å¯¹è¯å“åº”æ—¶é—´<2ç§’è¦æ±‚
```

---

## ğŸ“‹ å¼€å‘å·¥ä½œæµç¨‹

### ç¬¬1æ­¥: åŠŸèƒ½åˆ†æ”¯ç¡®è®¤

```bash
git branch
# ç¡®ä¿å·²åœ¨ 003-ai-ai åˆ†æ”¯
git status
# ç¡®è®¤changeså·²æäº¤
```

### ç¬¬2æ­¥: å¿«é€Ÿè¿­ä»£éªŒè¯

ä½¿ç”¨æä¾›çš„æµ‹è¯•å¥—ä»¶å¾ªç¯éªŒè¯ï¼š

```bash
# è¿è¡Œå¯¹è¯åŠŸèƒ½æµ‹è¯•
npm test chat-api-tests.spec.ts

# æ£€æŸ¥å¤šè½®å¯¹è¯memoryåŠŸèƒ½
npm test chat-memory-integration.spec.ts

# éªŒè¯ä¸ªæ€§åŒ–å“åº”
npm test chat-personalization.spec.ts
```

### ç¬¬3æ­¥: è¾¹ç•Œæƒ…å†µæµ‹è¯•

```bash
# æ¶æ„è¾“å…¥å¤„ç†
npm test chat-security-scenarios.spec.ts

# æç«¯å¸‚åœºæƒ…å†µ
npm test chat-edge-cases.spec.ts

# åˆè§„æ€§åœºæ™¯
npm test chat-compliance-scenarios.spec.ts
```

---

## ğŸ¯ ç«‹å³å¼€å§‹å¼€å‘

### åœ°é¢å¼€å‘æ¨¡æ¿

```typescript
// æ–‡ä»¶: src/app/api/chat/conversation/route.ts
// èµ·ç‚¹ï¼šå¤åˆ¶ç°æœ‰çš„stockService.tsé€»è¾‘
// æ ¸å¿ƒï¼šé›†æˆUserDialogueContextè®¡ç®—ä¸ªæ€§åŒ–å†…å®¹
// æ³¨æ„ï¼šç¡®ä¿æ‰€æœ‰AIè¾“å‡ºéƒ½é€šè¿‡ethicså®¡æ ¸
```

### æµ‹è¯•é©±åŠ¨å¼€å‘(TDD)å¾ªç¯

éµå¾ªæŠ•èµ„ä»£ç†å®ªæ³•ä¸­çš„**Test-First Development**ï¼š

1. **çº¢é˜¶æ®µ** (å¤±è´¥æµ‹è¯•): æŸ¥çœ‹å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹
2. **ç»¿é˜¶æ®µ** (æœ€å°åŠŸèƒ½): å®ç°ä»£ç ä½¿æµ‹è¯•é€šè¿‡
3. **é‡æ„é˜¶æ®µ** (ä¼˜åŒ–): æ”¹å–„å®ç°æ–¹å¼

```bash
# è¿è¡Œæµ‹è¯•æŸ¥çœ‹å¤±è´¥æƒ…å†µ
npm test chat-tdd-red.spec.ts

# å®ç°æœ€å°å¯è¡ŒåŠŸèƒ½
npm dev && npm test

# éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡
npm test chat-tdd-green.spec.ts
```

---

## ğŸ› ï¸ é«˜çº§åŠŸèƒ½å¼€å‘

### å¯¹è¯è®°å¿†å¢å¼º

```typescript
// æ ¸å¿ƒæ¥å£ï¼šå¢å¼ºå¯¹è¯è®°å¿†
interface MemoryEnhancer {
  loadContext: (userId: string) => Promise<UserDialogueContext>;
  persistMessage: (message: ChatMessage) => Promise<void>;
  summarizeForUser: (sessionId: string) => string;
}
```

### ä¸ªæ€§åŒ–æ¨¡å—

```typescript
// å®æ—¶ä¸ªæ€§åŒ–ï¼šå°†ç”¨æˆ·ä¿¡æ¯æ³¨å…¥å¯¹è¯ä¸Šä¸‹æ–‡
configurePersonalization({
  userProfileService: 'UserPortfolioService',
  riskCalculator: 'RiskAssessmentAgent',
  preferenceExtractor: 'UserBehaviorAnalyzer',
});
```

---

## ğŸ“ é‡åˆ°é—®é¢˜ï¼Ÿ

å‡ºç°ä»¥ä¸‹æƒ…å†µæ—¶çš„æ’æŸ¥è·¯å¾„ï¼š

| é—®é¢˜ç±»å‹ | å…³é”®è¯æœç´¢                   | è§£å†³æ–¹æ¡ˆæŒ‡å¼•                                        |
| -------- | ---------------------------- | --------------------------------------------------- |
| æƒé™é”™è¯¯ | "authentication required"    | [è´¦æˆ·é…ç½®æŒ‡å—](/docs/account-setup.md)              |
| æ•°æ®é”™è¯¯ | "FinnHub API not responding" | [APIé…ç½®æ£€æŸ¥](../002-asset-management/api-setup.md) |
| æµ‹è¯•å¤±è´¥ | "AI response timeout"        | æ¨¡å‹é…ç½®æˆ–ç½‘ç»œæ£€æŸ¥                                  |

æˆ–é€šè¿‡å‘½ä»¤è¡Œå¿«é€Ÿæ£€æŸ¥ï¼š

```bash
npm run check:chat-health
# è¾“å‡ºç³»ç»Ÿå¥åº·çŠ¶æ€æŠ¥å‘Š
```
