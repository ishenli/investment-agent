# 首次登录自动跳转创建账户

## Why

当前系统在用户首次登录后，即使没有任何交易账户，用户仍可以访问资产页面等需要账户数据的功能区域，导致体验不一致。用户可能在没有任何账户的情况下看到空数据或错误提示，这并不是预期的用户体验。

需要实现以下功能：
1. 首次登录时自动检测用户是否有账户
2. 如果没有账户，自动跳转到账戶创建页面
3. 账戶创建成功后，自动切换为选中状态并跳转到资产页面
4. 在没有账户的情况下，限制用户只能访问账戶创建页面

## What

### 功能改动

1. **首次登录检测**
   - 在应用启动或页面初始化时，调用后端 API 检查用户是否有账戶
   - 如果用户没有账戶，自动重定向到 `/account/create` 页面

2. **账戶创建成功后的行为**
   - 账戶创建成功后，自动将该账戶设置为当前选中账戶
   - 自动跳转到 `/asset` 页面

3. **页面访问限制**
   - 当用户没有账戶时，阻止访问需要账戶数据的页面（如 `/asset`, `/chat`, `/note` 等）
   - 只允许访问 `/account/create` 页面和基础页面（如 `/`, 帮助文档等）

### 涉及的组件

- 账户管理存储 (`src/app/store/account/`)
- 账户创建组件 (`src/app/(pages)/account/components/account-create.tsx`)
- 应用初始化逻辑
- 路由守卫/重定向逻辑

## Impact

### 用户影响

- 对于新注册用户，将获得更加流畅的引导体验
- 用户首次使用时立即被引导创建交易账戶，避免了困惑
- 账戶创建后直接进入资产页面，可以立即开始使用系统

### 技术影响

- 需要在应用启动时添加账户状态检查逻辑
- 需要实现路由守卫，在没有账户时限制页面访问
- 账户创建组件需要增强，添加自动跳转逻辑

### 性能影响

- 应用启动时需要额外的 API 调用来检查账户状态（轻量级操作）
- 对用户体验不会造成明显延迟

### 兼容性影响

- 对于已有账戶的用户，不会有任何变化
- 对于已有账戶但之前未设置默认选中账戶的用户，系统会自动选择第一个账戶

### 依赖影响

- 依赖现有的 `/api/account/selected` API
- 依赖账戶存储状态管理
- 需要 Next.js 的路由功能